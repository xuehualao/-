<!DOCTYPE html>
<html lang="zh">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>周生生&nbsp;&nbsp;|&nbsp;&nbsp;商品详情</title>
    <link rel="stylesheet" href="css/bootstrap.css">
    <link rel="stylesheet" href="css/reset.css">
    <link rel="stylesheet" href="css/iconfont.css">
    <link rel="stylesheet" href="css/style-cn.css">
    <link rel="stylesheet" href="css/detail.css">
    <script src="js/cookie.js"></script>
    <script src="js/jQuery.js"></script>
    <script src="js/indexnav.js"></script>
    <script src="js/zoomsl.min.js"></script>
    <script src="js/detailzoom.js"></script>
</head>

<body>
    <header>
        <div class="navTopWrap">
            <div class="navTop">
                <!-- 左侧 -->
                <div class="left-logo">
                    <div class="rolex-tudor">
                        <a href="" class="tudor"></a>
                        <a href="" class="rolex"></a>
                    </div>
                    <div class="left-item">
                        <!-- rmb位置和问号 -->
                        <!-- rmb -->
                        <div class="rmb">
                            <a href="">RMB(¥)</a>
                            <!-- ↓rmb的鼠标滑入表格 -->
                            <div class="rmb-price">
                                <select class="crmRegionCN">
                                    <option value="CN" selected>中国大陆</option>
                                    <option value="HKD($)">中国香港/海外</option>
                                </select>
                            </div>
                        </div>

                        <!-- 位置图标 -->
                        <img class="wz" src="/img/weizhi.png" alt="">
                        <!-- 搜索 -->
                        <div class="search">
                            <a href="">
                                <i></i>
                            </a>
                            <input type="text" placeholder="搜索" name="" id="">
                        </div>
                    </div>
                </div>
                <!--左边item结束 -->
                <a href="index.html">
                    <div class="logo"></div>
                </a>
                <div class="right-sh">
                    <!-- rightsomething -->
                    <div class="item">
                        <div class="not-log">
                            <a href="login.html" target="_blank">登陆</a>
                            /
                            <a href="regist.html" target="_blank">注册</a>

                            <div class="iconwrap">
                                <span class="iconfont icon-mianxing-08"></span>
                                <div class="xinyuan">
                                    <p>0</p>
                                </div>
                            </div>
                            <div class="iconwrap gouwudai1">
                                <span class="iconfont icon-gouwudai"></span>
                                <div class="yuan">
                                </div>
                            </div>


                            <a href="">金价资讯</a>
                        </div>

                    </div>
                </div>
            </div>
        </div>
        <div class="navBottom">
            <ul>
                <li>重点推介</li>
                <li>珠宝 <span class="iconfont icon-xia xia"></span> </li>
                <li>品牌系列 <span class="iconfont icon-xia xia"></span></li>
                <li>婚嫁 <span class="iconfont icon-xia xia"></span></li>
                <li>礼品 <span class="iconfont icon-xia xia"></span></li>
                <li>MINTYGREEN</li>
                <li>劳力士</li>
                <li>周生生之友</li>
                <li>服务 <span class="iconfont icon-xia xia"></span></li>
            </ul>
        </div>
        <div class="navBottom navBottom2">
            <div class="rolex-tudor">
                <a href="" class="tudor"></a>
                <a href="" class="rolex"></a>
            </div>
            <img src="./img/logo-nav.png" alt="">
            <ul>
                <li>重点推介</li>
                <li>珠宝 <span class="iconfont icon-xia xia"></span> </li>
                <li>品牌系列 <span class="iconfont icon-xia xia"></span></li>
                <li>婚嫁 <span class="iconfont icon-xia xia"></span></li>
                <li>礼品 <span class="iconfont icon-xia xia"></span></li>
                <li>MINTYGREEN</li>
                <li>劳力士</li>
                <li>周生生之友</li>
                <li>服务 <span class="iconfont icon-xia xia"></span></li>
            </ul>
            <div class="right-sh bright-sh">
                <div class="iconwrap1">
                    <span class="iconfont icon-mianxing-08"></span>
                </div>
                <div class="iconwrap2">
                    <span class="iconfont icon-gouwudai"></span>
                </div>
                <div class="cart">
                    <p class="mycart"></p>
                    <div class="cartw">
                        <!--<div class="cartlistwrap">
                                <div class="cartlist">
                                    <img class="cartimg" src="./img/01.jpg" width="10%" h alt="">
                                    <div class="carttitle">
                                        <p>charme</p>
                                        <p>爱情童话系列 足金串珠</p>
                                        <p>材质:足金</p>
                                        <p>￥1,450</p>
                                    </div>
                                </div>
                            </div>-->
                    </div>
                    <p class="zongji"></p>
                    <a class="jz" href="">结账</a>
                </div>
            </div>
        </div>
    </header>
    <!-- global end -->
    <!-- shop start -->
    <div class="share">
        <p>
            分享
        </p>
    </div>
    <main class="container">
        <!-- <div class="col-md-7 col-xs-12 col-img ">
            <img class="my-foto" src="./img/01.jpg" data-large="./img/full.jpg" title="Фото">
        </div>
        <div class="col-md-5 col-ctn">
            <div class="protitle">Charme</div>
            <h4>爱情童话系列 足金串珠</h4>
            <p>￥1,850</p>
            <div class="promd"></div>
            <a class="fackbtn">
                只需100块，随意选择您喜爱的Charme
            </a>
            <a class="joincart">
                加入购物车
            </a>
            <a class="round">
                即时分店库存查询
            </a>
            <div class="p">需要协助？ (+86) 400 830 1878</div>
        </div> -->
    </main>
    <footer>
        <div class="container">
            <div class="item-footer">
                <div>
                    <ul>
                        <li>联系我们</li>
                        <li>分店位置</li>
                        <li>网站地图</li>
                        <li>周生生集团</li>
                        <li>愿景及品牌理念</li>
                        <li>珠宝品质与工艺</li>
                        <li>加入我们</li>
                        <li>周生生贵金属化验所</li>
                    </ul>
                </div>
                <div>
                    <ul>
                        <li>服务</li>
                        <li>货品配送</li>
                        <li>退货及换货</li>
                        <li>帮助</li>
                    </ul>
                </div>
                <div>
                    <ul>
                        <li>关注我们</li>
                        <li>F 微博 ins</li>
                        <li>顾客服务(+86)400 830 1878</li>
                    </ul>
                </div>
            </div>

        </div>
        <div class="footericon">
            <span>© 2021周生生集团国际有限公司</span>
            <div>
                <span>隐私政策&nbsp;&nbsp;</span>
                <span>Cookie政策&nbsp;&nbsp;</span>
                <span>条款及细则&nbsp;&nbsp;</span>
                <span>粤ICP备12061196号&nbsp;&nbsp;</span>
                <span><img src="img/footer_icon.png" alt="">粤公安网备44010602008010号</span>
            </div>
        </div>

    </footer>
</body>
<script>
    var pid = getCookie("pid");
    var uid = getCookie("id");
    getCookie("token")
    $(".iconwrap2").mouseover(function () {
        $(".cart").fadeIn();
    })
    $(".iconwrap2").mouseout(function () {
        $(".cart").hide();
    })
    $(".cart").mouseover(function () {
        $(".cart").show();
    })
    $(".cart").mouseout(function () {
        $(".cart").hide();
    })
    let zongji = "";
    //加载页面
    $.ajax({
        type: "get",
        async: false,
        cache: false,
        url: `http://jx.xuzhixiang.top/ap/api/detail.php?id=${pid}`,
        success: function (result) {
            localStorage.setItem("productData", JSON.stringify(result.data));
            var productData = JSON.parse(localStorage.getItem("productData"));
            let str = "";
            setCookie("pimg", productData.pimg);
            setCookie("pname", productData.pname);
            setCookie("pprice", productData.pprice);
            str += `
                    <div class="col-md-7 col-xs-12 col-img ">
                        <img class="my-foto" src="${productData.pimg}" data-large="./img/full.jpg" title="Фото">
                    </div>
                    <div class="col-md-5 col-ctn">
                        <div class="protitle">Charme</div>
                        <h4>${productData.pname}</h4>
                        <p>￥${productData.pprice}</p>
                        <div class="promd"></div>
                        <a class="fackbtn">
                            只需100块，随意选择您喜爱的Charme
                        </a>
                        <a class="joincart" data-id="${productData.pid}">
                            加入购物袋
                        </a>
                        <a class="round">
                            即时分店库存查询
                        </a>
                        <div class="p">需要协助？ (+86) 400 830 1878</div>
                    </div>
            `
            $("main").html(str)


            /* if (getCookie()) {
                 $(".logw").css("display", "none");
                 $(".xinyuan").css("left", "18px")
                 $(".yuan").css("left", "110px")
            }*/
        }
    })

    //显示(查询)购物车列表
    var num = 0;
    if (getCookie(uid)) {
        $.ajax({
            type: "get",
            async: false,
            cache: false,
            url: `http://jx.xuzhixiang.top/ap/api/cart-list.php?id=${uid}`,
            success: function (result) {
                localStorage.setItem("cartlist", JSON.stringify(result.data));
                var cartlist = JSON.parse(localStorage.getItem("cartlist"));
                console.log(cartlist);
                let strcart = "";
                let num = 0;
                cartlist.forEach((item) => {
                    strcart += `
                    <div class="cartlist">
                        <img class="cartimg" src="${item['pimg']}" width="10%" h alt="">
                        <div class="carttitle">
                            <p>charme</p>
                            <p>${item['pname']}</p>
                            <p >材质:足金</p>
                            <p>￥${item['pprice']}
                                &nbsp;&nbsp;&nbsp;&nbsp;
                                <span class="plus">+&nbsp;</span>
                                <span class="jian">-&nbsp;</span>
                                <span class="cheng">×&nbsp;</span>
                            </p>
                        </div>
                    </div>
                `
                    num++
                    $(".cartw").html(strcart);
                    zongji = Number(item['pprice']);
                    zongji += zongji
                    console.log(Number(item['pprice']));
                    $(".zongji").html("总计:￥" + zongji)
                    $(".yuan").html("<p>" + num + "</p>")
                    $(".mycart").html("我的购物袋" + "(" + num + ")")

                })
            }

        })

    }

    //加入购物车接口
    $.ajax({
        type: "get",
        async: false,
        cache: false,
        url: `http://jx.xuzhixiang.top/ap/api/add-product.php?uid=${uid}&pid=${pid}&pnum=1`,
        success: function (result) {
            // $(".joincart").click(function () {
            //     alert("加入购入车成功")
            // })
            $(".joincart").click(
                function () {
                    $(".cart").fadeIn()
                    $.ajax({
                        type: "get",
                        async: false,
                        cache: false,
                        url: `http://jx.xuzhixiang.top/ap/api/cart-list.php?id=${uid}`,
                        success: function (result) {
                            localStorage.setItem("cartlist", JSON.stringify(result.data));
                            var cartlist = JSON.parse(localStorage.getItem("cartlist"));
                            console.log(cartlist);
                            let strcart = "";
                            let num = 0;
                            cartlist.forEach((item) => {
                                strcart += `
                    <div class="cartlist">
                        <img class="cartimg" src="${item['pimg']}" width="10%" h alt="">
                        <div class="carttitle">
                            <p>charme</p>
                            <p>${item['pname']}</p>
                            <p >材质:足金</p>
                            <p>￥${item['pprice']}
                                &nbsp;&nbsp;&nbsp;&nbsp;
                                <span class="plus">+&nbsp;</span>
                                <span class="jian">-&nbsp;</span>
                                <span class="cheng">×&nbsp;</span>
                            </p>
                        </div>
                    </div>
                `
                                num++
                                $(".cartw").html(strcart);
                                zongji = Number(item['pprice']);
                                zongji += zongji
                                console.log(Number(item['pprice']));
                                $(".zongji").html("总计:￥" + zongji)
                                $(".yuan").html("<p>" + num + "</p>")
                                $(".mycart").html("我的购物袋" + "(" + num + ")")

                            })
                        }

                    })
                })

        }

    })

    //删除购物车
    $(".jian").click(function () {
        $.ajax({
            type: "get",
            async: false,
            cache: false,
            url: `http://jx.xuzhixiang.top/ap/api/cart-delete.php?uid=${uid}&pid=${pid}`,
            success: function (result) {
                $(".jian").css("cursor", "pointer")
                alert("商品已删除")
            }
        })
    })

</script>

</html>